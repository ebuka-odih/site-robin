import{r as h,j as t,c as y}from"./client-C3EM7bU6.js";const C=({notifications:x=[],csrfToken:o})=>{const[n,l]=h.useState(x),[i,g]=h.useState("all"),[u,d]=h.useState(!1),m=n.filter(e=>{var r;return i==="all"?!0:i==="unread"?!e.read_at:((r={deposits:["deposit","deposit_submitted","deposit_approved"],withdrawals:["withdrawal","withdrawal_submitted","withdrawal_approved"],trading:["trading","trade"],system:["system","account_reactivated","account_suspended"]}[i])==null?void 0:r.includes(e.type))||!1}),p=e=>{const r={deposit:"bg-green-600/20 text-green-400",deposit_submitted:"bg-green-600/20 text-green-400",deposit_approved:"bg-green-600/20 text-green-400",withdrawal:"bg-red-600/20 text-red-400",withdrawal_submitted:"bg-red-600/20 text-red-400",withdrawal_approved:"bg-red-600/20 text-red-400",trading:"bg-blue-600/20 text-blue-400",copy_trade:"bg-purple-600/20 text-purple-400",copy_trade_started:"bg-purple-600/20 text-purple-400",bot_trade:"bg-yellow-600/20 text-yellow-400",bot_created:"bg-yellow-600/20 text-yellow-400",bot_started:"bg-yellow-600/20 text-yellow-400",system:"bg-gray-600/20 text-gray-400",account_reactivated:"bg-green-600/20 text-green-400",account_suspended:"bg-red-600/20 text-red-400"}[e]||"bg-gray-600/20 text-gray-400";return t.jsxs("div",{className:`flex h-10 w-10 items-center justify-center rounded-full ${r}`,children:[(e==null?void 0:e.includes("deposit"))&&t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),(e==null?void 0:e.includes("withdrawal"))&&t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 12H4"})}),e==="trading"&&t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),(e==null?void 0:e.includes("copy_trade"))&&t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),(e==null?void 0:e.includes("bot"))&&t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),!(e!=null&&e.includes("deposit"))&&!(e!=null&&e.includes("withdrawal"))&&e!=="trading"&&!(e!=null&&e.includes("copy_trade"))&&!(e!=null&&e.includes("bot"))&&t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})]})},b=e=>{if(!(e!=null&&e.status))return null;const r={active:"bg-yellow-100 text-yellow-800",suspended:"bg-orange-100 text-orange-800",completed:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"}[e.status.toLowerCase()]||"bg-gray-100 text-gray-800";return t.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${r}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})},f=e=>{if(!e)return"Just now";const s=new Date(e),a=Math.floor((new Date-s)/1e3);return a<60?"Just now":a<3600?`${Math.floor(a/60)} minutes ago`:a<86400?`${Math.floor(a/3600)} hours ago`:a<604800?`${Math.floor(a/86400)} days ago`:a<2592e3?`${Math.floor(a/604800)} weeks ago`:a<31536e3?`${Math.floor(a/2592e3)} months ago`:`${Math.floor(a/31536e3)} years ago`},w=async e=>{try{(await fetch(`/user/notifications/${e}/read`,{method:"POST",headers:{"X-CSRF-TOKEN":o,"Content-Type":"application/json"}})).ok&&l(n.map(r=>r.id===e?{...r,read_at:new Date().toISOString()}:r))}catch(s){console.error("Error marking notification as read:",s)}},j=async e=>{try{(await fetch(`/user/notifications/${e}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":o,"Content-Type":"application/json"}})).ok&&l(n.filter(r=>r.id!==e))}catch(s){console.error("Error deleting notification:",s)}},v=async()=>{d(!0);try{(await fetch("/user/notifications/mark-all-read",{method:"POST",headers:{"X-CSRF-TOKEN":o,"Content-Type":"application/json"}})).ok&&l(n.map(s=>({...s,read_at:s.read_at||new Date().toISOString()})))}catch(e){console.error("Error marking all as read:",e)}finally{d(!1)}},N=async()=>{if(window.confirm("Are you sure you want to clear all notifications? This action cannot be undone.")){d(!0);try{(await fetch("/user/notifications/clear-all",{method:"DELETE",headers:{"X-CSRF-TOKEN":o,"Content-Type":"application/json"}})).ok&&l([])}catch(e){console.error("Error clearing all notifications:",e)}finally{d(!1)}}},k=[{id:"all",label:"All Notifications"},{id:"unread",label:"Unread"},{id:"deposits",label:"Deposits"},{id:"withdrawals",label:"Withdrawals"},{id:"trading",label:"Trading"},{id:"system",label:"System"}];return t.jsxs("div",{className:"space-y-6 text-white",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-[#08f58d]",children:"Activity"}),t.jsx("h1",{className:"text-2xl font-semibold",children:"Notifications"}),t.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Stay updated with your account activities"})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2",children:[t.jsx("button",{onClick:v,disabled:u,className:"px-4 py-2 text-sm bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Processing...":"Mark All as Read"}),t.jsx("button",{onClick:N,disabled:u,className:"px-4 py-2 text-sm bg-red-600 text-white rounded-xl hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear All"})]})]}),t.jsx("div",{className:"border-b border-[#1a1a1a]",children:t.jsx("nav",{className:"-mb-px flex space-x-8 overflow-x-auto",children:k.map(e=>t.jsx("button",{onClick:()=>g(e.id),className:`py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap transition-colors ${i===e.id?"border-[#08f58d] text-[#08f58d]":"border-transparent text-gray-400 hover:text-gray-300"}`,children:e.label},e.id))})}),t.jsx("div",{className:"space-y-4",children:m.length>0?m.map(e=>t.jsx("div",{className:`rounded-2xl border bg-[#050505] p-5 hover:border-[#08f58d]/30 transition-colors ${e.read_at?"border-[#1a1a1a]":"border-[#08f58d]/30 border-l-4 border-l-[#08f58d]"}`,children:t.jsxs("div",{className:"flex items-start gap-4",children:[p(e.type),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"flex items-start justify-between gap-4",children:t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-base font-semibold text-white",children:e.title}),t.jsx("p",{className:"text-sm text-gray-400 mt-1",children:e.message}),e.data&&t.jsxs("div",{className:"mt-3 space-y-2",children:[e.data.amount&&t.jsxs("p",{className:"text-sm text-[#08f58d] font-medium",children:["Amount: $",parseFloat(e.data.amount).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})," ",e.data.currency||"USD"]}),b(e.data)]})]})}),t.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-[#1a1a1a]",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-xs text-gray-500",children:f(e.created_at)}),!e.read_at&&t.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"New"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[!e.read_at&&t.jsx("button",{onClick:()=>w(e.id),className:"px-3 py-1.5 text-xs bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Mark Read"}),t.jsx("button",{onClick:()=>j(e.id),className:"px-3 py-1.5 text-xs bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete"})]})]})]})]})},e.id)):t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"flex justify-center mb-4",children:t.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-[#1a1a1a]",children:t.jsx("svg",{className:"h-8 w-8 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})})}),t.jsx("h3",{className:"text-lg font-medium text-gray-400 mb-2",children:"No notifications"}),t.jsx("p",{className:"text-gray-500",children:"You're all caught up! New notifications will appear here."})]})})]})},c=document.getElementById("react-notifications");if(c){const x=c.dataset.props?JSON.parse(c.dataset.props):{};y.createRoot(c).render(t.jsx(C,{...x}))}
